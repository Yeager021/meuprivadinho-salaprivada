<script>
    const content = document.getElementById('content');
    const accessTime = localStorage.getItem('videoCallAccessTime');
    const now = Date.now();

    // 20 segundos em milissegundos
    const TIME_LIMIT = 20000; 

    if (accessTime && (now - parseInt(accessTime)) > TIME_LIMIT) {
        // J√° passou do limite ‚Üí bloqueia
        content.innerHTML = `
            <div class="message">Essa chamada de v√≠deo j√° terminou...</div>
        `;
    } else {
        // Primeiro acesso ou dentro do tempo
        if (!accessTime) {
            localStorage.setItem('videoCallAccessTime', now.toString());
        }

        content.innerHTML = `
            <h1>Luc√≠a convidou voc√™ para uma chamada de v√≠deo ao vivo...</h1>
            <p>Clique no bot√£o abaixo para aceitar o convite üëá</p>
            <button class="button" id="joinButton">Participar agora</button>
        `;

        const joinButton = document.getElementById('joinButton');
        joinButton.addEventListener('click', () => {
            startLoadingSequence();
        });
    }

    function startLoadingSequence() {
        const messages = [
            "Confirmando conex√£o...",
            "Luc√≠a est√° online agora...",
            "Entrando na sala ao vivo..."
        ];
        let index = 0;

        content.innerHTML = `<div class="loading">${messages[index]}</div>`;
        const loadingElement = content.querySelector('.loading');

        const interval = setInterval(() => {
            index++;
            if (index < messages.length) {
                loadingElement.textContent = messages[index];
            } else {
                clearInterval(interval);
                window.location.href = "https://meuprivadionho-salaprivada-chamadinha.netlify.app/";
            }
        }, 1500);
    }
</script>
